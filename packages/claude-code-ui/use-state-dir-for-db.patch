--- a/server/database/db.js
+++ b/server/database/db.js
@@ -7,7 +7,28 @@
 const __filename = fileURLToPath(import.meta.url);
 const __dirname = dirname(__filename);

-const DB_PATH = path.join(__dirname, 'auth.db');
+// Determine state directory following XDG standards
+const getStateDir = () => {
+  if (process.env.CLAUDE_CODE_UI_STATE_DIR) {
+    return process.env.CLAUDE_CODE_UI_STATE_DIR;
+  }
+  if (process.env.XDG_STATE_HOME) {
+    return path.join(process.env.XDG_STATE_HOME, 'claude-code-ui');
+  }
+  if (process.env.HOME) {
+    return path.join(process.env.HOME, '.local', 'state', 'claude-code-ui');
+  }
+  return path.join(process.cwd(), '.claude-code-ui');
+};
+
+const STATE_DIR = getStateDir();
+
+// Ensure state directory exists
+if (!fs.existsSync(STATE_DIR)) {
+  fs.mkdirSync(STATE_DIR, { recursive: true });
+}
+
+const DB_PATH = path.join(STATE_DIR, 'auth.db');
 const INIT_SQL_PATH = path.join(__dirname, 'init.sql');

 // Create database connection
